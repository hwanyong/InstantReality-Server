<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini Robotics Control</title>
    <meta name="description" content="AI-powered robot arm control interface using Gemini API">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <h1>ğŸ¤– Gemini Robotics</h1>
            <div class="status-bar">
                <span id="connection-status" class="status disconnected">â— Disconnected</span>
                <button id="estop-btn" class="btn-danger">ğŸ›‘ E-STOP</button>
            </div>
        </header>

        <main class="main-content">
            <!-- Left Panel: Video + AR Overlay -->
            <section class="video-section">
                <h2>ğŸ“¹ Camera View</h2>
                <div class="video-container">
                    <canvas id="video-canvas" width="800" height="450"></canvas>
                    <canvas id="ar-overlay" width="800" height="450"></canvas>
                </div>
                <div class="video-controls">
                    <button id="capture-btn" class="btn">ğŸ“· Capture</button>
                    <button id="clear-ar-btn" class="btn">ğŸ—‘ï¸ Clear AR</button>
                </div>
            </section>

            <!-- Right Panel: Controls -->
            <section class="control-section">
                <!-- Prompt Input -->
                <div class="control-card">
                    <h3>ğŸ’¬ Natural Language Command</h3>
                    <textarea id="prompt-input" 
                              placeholder="ì˜ˆ: ë¹¨ê°„ íœì„ ì§‘ì–´ì¤˜&#10;Pick up the red pen"></textarea>
                    <button id="send-prompt-btn" class="btn-primary">ğŸš€ Send to Gemini</button>
                    <div id="gemini-result" class="result-box"></div>
                </div>

                <!-- Manual Arm Selection (Read-only: AI decides) -->
                <div class="control-card">
                    <h3>ğŸ¦¾ Active Arm</h3>
                    <div class="arm-indicator">
                        <span id="arm-selection" class="arm-badge">-</span>
                        <small>AI ìë™ ì„ íƒ</small>
                    </div>
                </div>

                <!-- Manual Joint Control -->
                <div class="control-card">
                    <h3>ğŸ›ï¸ Manual Control</h3>
                    <div id="joint-sliders"></div>
                    <button id="send-manual-btn" class="btn">â–¶ï¸ Execute Manual</button>
                </div>

                <!-- IK Test -->
                <div class="control-card">
                    <h3>ğŸ“ IK Test</h3>
                    <div class="ik-inputs">
                        <label>X: <input type="number" id="ik-x" value="0" step="10"></label>
                        <label>Y: <input type="number" id="ik-y" value="200" step="10"></label>
                        <label>Z: <input type="number" id="ik-z" value="50" step="10"></label>
                    </div>
                    <button id="test-ik-btn" class="btn">ğŸ“ Calculate IK</button>
                    <pre id="ik-result"></pre>
                </div>
            </section>
        </main>
    </div>

    <script type="module" src="app.mjs"></script>
</body>
</html>
